{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://hypermage.vr/schemas/GameplayRules.schema.json",
    "title": "Gameplay Rules",
    "description": "Gameplay rule definitions with trigger-action patterns",
    "type": "object",
    "required": [
        "id",
        "levelId",
        "rules"
    ],
    "properties": {
        "id": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier for this gameplay rules document"
        },
        "levelId": {
            "type": "string",
            "format": "uuid",
            "description": "Reference to the LevelPlan this ruleset applies to"
        },
        "rules": {
            "type": "array",
            "description": "List of gameplay rules",
            "items": {
                "type": "object",
                "required": [
                    "id",
                    "trigger",
                    "action"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "description": "Unique identifier for this rule"
                    },
                    "trigger": {
                        "type": "object",
                        "required": [
                            "type",
                            "conditions"
                        ],
                        "description": "Event that activates this rule",
                        "properties": {
                            "type": {
                                "type": "string",
                                "description": "Type of trigger event (e.g., player_enters_zone, objective_complete, timer_elapsed)"
                            },
                            "conditions": {
                                "type": "object",
                                "description": "Conditions that must be met for the trigger to activate",
                                "additionalProperties": true
                            }
                        }
                    },
                    "action": {
                        "type": "object",
                        "required": [
                            "type",
                            "parameters"
                        ],
                        "description": "Action to execute when triggered",
                        "properties": {
                            "type": {
                                "type": "string",
                                "description": "Type of action (e.g., grant_reward, spawn_enemy, open_door, display_message)"
                            },
                            "parameters": {
                                "type": "object",
                                "description": "Parameters for the action",
                                "additionalProperties": true
                            }
                        }
                    },
                    "enabled": {
                        "type": "boolean",
                        "default": true,
                        "description": "Whether this rule is currently active"
                    },
                    "priority": {
                        "type": "integer",
                        "default": 0,
                        "description": "Execution priority when multiple rules trigger simultaneously (higher = earlier)"
                    }
                }
            }
        }
    }
}