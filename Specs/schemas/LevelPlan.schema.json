{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://hypermage.vr/schemas/LevelPlan.schema.json",
    "title": "Level Plan",
    "description": "A structured specification document describing a VR multiplayer level",
    "type": "object",
    "required": [
        "id",
        "name",
        "description",
        "zones",
        "playerSpawns",
        "objectives"
    ],
    "properties": {
        "id": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier for the level plan"
        },
        "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "Human-readable name for the level"
        },
        "description": {
            "type": "string",
            "maxLength": 1000,
            "description": "Detailed description of the level design and gameplay intent"
        },
        "zones": {
            "type": "array",
            "minItems": 1,
            "description": "Spatial zones that define the level layout",
            "items": {
                "type": "object",
                "required": [
                    "id",
                    "name",
                    "bounds",
                    "type"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "description": "Unique identifier for the zone"
                    },
                    "name": {
                        "type": "string",
                        "description": "Human-readable name for the zone"
                    },
                    "bounds": {
                        "type": "object",
                        "required": [
                            "center",
                            "extents"
                        ],
                        "description": "3D bounding box defining the zone's spatial extent",
                        "properties": {
                            "center": {
                                "type": "object",
                                "required": [
                                    "x",
                                    "y",
                                    "z"
                                ],
                                "properties": {
                                    "x": {
                                        "type": "number"
                                    },
                                    "y": {
                                        "type": "number"
                                    },
                                    "z": {
                                        "type": "number"
                                    }
                                }
                            },
                            "extents": {
                                "type": "object",
                                "required": [
                                    "x",
                                    "y",
                                    "z"
                                ],
                                "description": "Half-extents from center (Unreal convention)",
                                "properties": {
                                    "x": {
                                        "type": "number",
                                        "minimum": 0
                                    },
                                    "y": {
                                        "type": "number",
                                        "minimum": 0
                                    },
                                    "z": {
                                        "type": "number",
                                        "minimum": 0
                                    }
                                }
                            }
                        }
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "combat",
                            "safe",
                            "objective",
                            "spawn"
                        ],
                        "description": "Functional type of the zone"
                    },
                    "assets": {
                        "type": "array",
                        "description": "Asset IDs to be placed in this zone",
                        "items": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "playerSpawns": {
            "type": "array",
            "minItems": 1,
            "description": "Player spawn points for the level",
            "items": {
                "type": "object",
                "required": [
                    "position",
                    "rotation"
                ],
                "properties": {
                    "position": {
                        "type": "object",
                        "required": [
                            "x",
                            "y",
                            "z"
                        ],
                        "description": "World position in Unreal units (cm)",
                        "properties": {
                            "x": {
                                "type": "number"
                            },
                            "y": {
                                "type": "number"
                            },
                            "z": {
                                "type": "number"
                            }
                        }
                    },
                    "rotation": {
                        "type": "object",
                        "required": [
                            "pitch",
                            "yaw",
                            "roll"
                        ],
                        "description": "Rotation in degrees",
                        "properties": {
                            "pitch": {
                                "type": "number",
                                "minimum": -180,
                                "maximum": 180
                            },
                            "yaw": {
                                "type": "number",
                                "minimum": -180,
                                "maximum": 180
                            },
                            "roll": {
                                "type": "number",
                                "minimum": -180,
                                "maximum": 180
                            }
                        }
                    }
                }
            }
        },
        "objectives": {
            "type": "array",
            "description": "Gameplay objectives for the level",
            "items": {
                "type": "object",
                "required": [
                    "id",
                    "type",
                    "description"
                ],
                "properties": {
                    "id": {
                        "type": "string",
                        "description": "Unique identifier for the objective"
                    },
                    "type": {
                        "type": "string",
                        "description": "Type of objective (e.g., capture_point, collect_item, eliminate_target)"
                    },
                    "description": {
                        "type": "string",
                        "description": "Human-readable description of the objective"
                    },
                    "rewardId": {
                        "type": "string",
                        "description": "Reward ID from rewards_catalog.json to grant on completion"
                    },
                    "position": {
                        "type": "object",
                        "description": "Optional world position for the objective",
                        "properties": {
                            "x": {
                                "type": "number"
                            },
                            "y": {
                                "type": "number"
                            },
                            "z": {
                                "type": "number"
                            }
                        }
                    }
                }
            }
        }
    }
}